---
// Direccion.astro
---

<section class="py-8 px-4 relative">
  <div class="max-w-xl mx-auto text-center relative">
    <!-- T√çTULO DIRECCI√ìN -->
    <div class="mb-2" id="titulo-direccion">
      <h2
        class="font-charm text-2xl md:text-3xl text-[#C3A1D9] font-bold tracking-wide"
      >
        RECEPCI√ìN SOCIAL
      </h2>
    </div>
    <!-- üèõÔ∏è ICONO DIRECCI√ìN CON MARIPOSAS -->
    <div
      class="flex justify-center items-center gap-4 md:gap-6 mb-4"
      id="icono-direccion"
    >
      <!-- ü¶ã MARIPOSA IZQUIERDA -->
      <div class="mariposa-flotante flex items-center" id="mariposa-dir-izq">
        <img
          src="/gif/MariposaRoja.gif"
          alt="Mariposa"
          class="w-20 h-20 object-contain scale-x-[-1]"
        />
      </div>

      <!-- ICONO CENTRAL -->
      <img
        src="/imagenes/direccion.png"
        alt="Icono de direcci√≥n"
        class="w-24 h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 object-contain icono"
      />

      <!-- ü¶ã MARIPOSA DERECHA -->
      <div class="mariposa-flotante flex items-center" id="mariposa-dir-der">
        <img
          src="/gif/MariposaRoja.gif"
          alt="Mariposa"
          class="w-20 h-20 object-contain"
        />
      </div>
    </div>

    <!-- INFORMACI√ìN DE UBICACI√ìN -->
    <div class="mb-2" id="info-direccion">
      <!-- Nombre del lugar -->
      <h3 class="font-charm text-xl md:text-2xl text-[#BFC1C2] font-bold mb-2">
        Sal√≥n de Eventos "Ana Maria"
      </h3>

      <!-- Direcci√≥n -->
      <p
        class="font-charm text-lg md:text-xl text-[#C3A1D9] leading-relaxed mb-3"
      >
        Av. Banzer, entre 4to y 5to anillo
      </p>

      <!-- Hora -->
      <p class="font-charm text-2xl md:text-2xl text-[#C3A1D9] font-bold">
        Hora: 19:30
      </p>
    </div>

    <!-- BOT√ìN VER UBICACI√ìN - ROSADO SIMPLE -->
    <div class="flex justify-center" id="boton-ubicacion">
      <a
        href="https://maps.app.goo.gl/CrRqewfh3EyKrWk18"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center gap-2 px-8 py-2 md:px-10 md:py-4 bg-[#C3A1D9] rounded-lg shadow-md hover:shadow-lg hover:bg-[#C3A1D9] transition-all duration-300"
      >
        <!-- Icono de ubicaci√≥n -->
        <svg
          class="w-5 h-5 md:w-6 md:h-6 text-white"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"
          ></path>
        </svg>

        <!-- Texto -->
        <span class="font-charm text-lg md:text-xl text-white font-semibold">
          Ver Ubicaci√≥n
        </span>
      </a>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      // Estado inicial
      gsap.set("#icono-direccion", { opacity: 0, scale: 0.8 });
      gsap.set("#titulo-direccion", { opacity: 0, scale: 0.9 });
      gsap.set("#info-direccion", { opacity: 0, scale: 0.9 });
      gsap.set("#boton-ubicacion", { opacity: 0, scale: 0.9 });
      gsap.set("#mariposa-dir-izq", { opacity: 0, x: -30 });
      gsap.set("#mariposa-dir-der", { opacity: 0, x: 30 });

      // ‚ú® ANIMACI√ìN SIMULT√ÅNEA - TODO AL MISMO TIEMPO
      ScrollTrigger.create({
        trigger: "#icono-direccion",
        start: "top 85%",
        end: "top 20%",
        onEnter: () => {
          const tl = gsap.timeline();

          // TODO aparece al mismo tiempo
          tl.to(
            "#icono-direccion, #mariposa-dir-izq, #mariposa-dir-der, #titulo-direccion, #info-direccion, #boton-ubicacion",
            {
              opacity: 1,
              duration: 1,
              ease: "power2.out",
            },
          )
            // Animaciones individuales (simult√°neas)
            .to(
              "#icono-direccion",
              {
                scale: 1,
                duration: 1,
                ease: "back.out(1.5)",
              },
              "<",
            )
            .to(
              "#mariposa-dir-izq",
              {
                x: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#mariposa-dir-der",
              {
                x: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#titulo-direccion, #info-direccion, #boton-ubicacion",
              {
                scale: 1,
                duration: 1,
                ease: "back.out(1.2)",
              },
              "<",
            );

          // ü¶ã FLOTADO CONTINUO DE MARIPOSAS (despu√©s de aparecer)
          gsap.to("#mariposa-dir-izq", {
            y: -15,
            x: 5,
            rotation: 5,
            duration: 3,
            ease: "sine.inOut",
            yoyo: true,
            repeat: -1,
            delay: 0.5,
          });

          gsap.to("#mariposa-dir-der", {
            y: -15,
            x: -5,
            rotation: -5,
            duration: 3.2,
            ease: "sine.inOut",
            yoyo: true,
            repeat: -1,
            delay: 0.7,
          });
        },
        onLeaveBack: () => {
          // Salida simult√°nea
          const tl = gsap.timeline();

          tl.to(
            "#icono-direccion, #mariposa-dir-izq, #mariposa-dir-der, #titulo-direccion, #info-direccion, #boton-ubicacion",
            {
              opacity: 0,
              duration: 0.5,
              ease: "power2.in",
            },
          )
            .to(
              "#icono-direccion",
              {
                scale: 0.8,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            )
            .to(
              "#mariposa-dir-izq",
              {
                x: -30,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            )
            .to(
              "#mariposa-dir-der",
              {
                x: 30,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            )
            .to(
              "#titulo-direccion, #info-direccion, #boton-ubicacion",
              {
                scale: 0.9,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            );
        },
      });

      console.log("üìçü¶ã Secci√≥n de Direcci√≥n con mariposas inicializada");
    });
  }
</script>

<style>
  /* Asegurar que las mariposas tengan un movimiento fluido */
  .mariposa-flotante {
    will-change: transform;
    transition: all 0.3s ease;
  }

  /* Hover en las mariposas */
  .mariposa-flotante:hover {
    transform: scale(1.1) !important;
    filter: brightness(1.2);
  }

  /* Filtro dorado para #a27735 */
  .icono-dorado {
    filter: brightness(0) saturate(100%) invert(81%) sepia(18%) saturate(1253%)
      hue-rotate(228deg) brightness(98%) contrast(91%);
    transition:
      filter 0.3s ease,
      transform 0.3s ease;
  }
</style>
